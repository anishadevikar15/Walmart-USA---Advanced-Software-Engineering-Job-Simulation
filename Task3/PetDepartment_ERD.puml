@startuml
title Walmart Pet Department - ERD (Task 3)

left to right direction

' ---- Spacing & layout improvements ----
skinparam linetype ortho
skinparam nodesep 80
skinparam ranksep 100
skinparam entity {
  BackgroundColor White
  BorderColor Black
}

' =========================
' CORE MASTER TABLES
' =========================

entity Manufacturer {
  + manufacturer_id : int <<PK>>
  --
  name : varchar
}

entity Animal {
  + animal_id : int <<PK>>
  --
  name : varchar
}

entity Product {
  + product_id : int <<PK>>
  --
  name : varchar
  product_type : varchar
  manufacturer_id : int <<FK>>
}

entity Customer {
  + customer_id : int <<PK>>
  --
  name : varchar
  email : varchar <<UNIQUE>>
}

entity Location {
  + location_id : int <<PK>>
  --
  name : varchar
  zip_code : varchar
}

' =========================
' PRODUCT SUBTYPES
' =========================

entity PetFood {
  + product_id : int <<PK, FK>>
  --
  weight : varchar
  flavor : varchar
  target_health_condition : varchar
}

entity PetToy {
  + product_id : int <<PK, FK>>
  --
  material : varchar
  durability : varchar
}

entity PetApparel {
  + product_id : int <<PK, FK>>
  --
  color : varchar
  size : varchar
  care_instructions : varchar
}

' =========================
' TRANSACTIONS
' =========================

entity Transaction {
  + transaction_id : int <<PK>>
  --
  transaction_date : date
  customer_id : int <<FK>>
}

entity Transaction_Item {
  + transaction_id : int <<PK, FK>>
  + product_id : int <<PK, FK>>
  --
  quantity : int
}

' =========================
' SHIPMENTS
' =========================

entity Shipment {
  + shipment_id : int <<PK>>
  --
  origin_location_id : int <<FK>>
  destination_location_id : int <<FK>>
  shipment_date : date
}

entity Shipment_Item {
  + shipment_id : int <<PK, FK>>
  + product_id : int <<PK, FK>>
  --
  quantity : int
}

' =========================
' MANY TO MANY
' =========================

entity Product_Animal {
  + product_id : int <<PK, FK>>
  + animal_id : int <<PK, FK>>
}

' =========================
' RELATIONSHIPS
' =========================

Manufacturer ||--o{ Product : manufactures

Product ||--|| PetFood
Product ||--|| PetToy
Product ||--|| PetApparel

Product ||--o{ Product_Animal
Animal ||--o{ Product_Animal

Customer ||--o{ Transaction : makes
Transaction ||--o{ Transaction_Item
Product ||--o{ Transaction_Item

Location ||--o{ Shipment : origin
Location ||--o{ Shipment : destination
Shipment ||--o{ Shipment_Item
Product ||--o{ Shipment_Item

@enduml
